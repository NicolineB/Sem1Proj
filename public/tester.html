<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script src="scripts/d3.js"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <title>Vandstigninger</title>
  </head>
  <body>
    <!--<header>Logo eller andet evt. nav bar</header> -->
    <section class="infoslide">
      <h1 id="main-title">Effekten af vandstigninger</h1>
      <!--figur til at illustere at scroll ned-->
      <a class="scroll-down arrow">
        <label>Scroll</label>
        <span></span>
      </a>
    </section>

    <section class="water-rise">
      <h1 id="water-rise-title">year ....</h1>
      <!-- evt plus minus antal år her-->

      <!--To col / grid med to - visualisering col1, boks anden-->
      <div class="col1">
        <script>
          d3.json("/api/climate", {
            method: "POST",
          }).then(function (response) {
            const data = response.data; // Hent data ud af response
            console.log("data", data);

            const w = 500;
            const h = 350;
            var padding = 10;
            const barPadding = 2;
            const bottomPadding = 20;
            const sidePadding = 10;

            const svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);
            
                    // Lav en skala for x-aksen
            const xScale = d3.scaleLinear()
            .domain([0, d3.max(data, function (d) { return parseInt(d.year); })])
            .range([sidePadding, w - sidePadding]);
            // Lav en skala for y-aksen
            const yScale = d3.scaleLinear()
            .domain([0, d3.max(data, function (d) { return parseFloat(d.best_case); })])
            .range([0, h - bottomPadding]);

            // Lave scatter plot (punktdiagram)
            svg.selectAll("circle")
            .data(data)
            .enter()
            .append("circle")
            .attr("cx", function(d) {
                // 'd' er et koordinat på formen [x, y]
                return xScale(parseInt(d.year)); // Første værdi i indre array (x)
            })
            .attr("cy", function(d) {
                return yScale(parseFloat(d.best_case) - bottomPadding); // Anden værdi i indre array (y)
            })
            .attr("width", w / data.length - barPadding)
            .attr("height", function (d) { return yScale(d)})
            .attr("r", 5);

        // Udfyld label
        svg.selectAll("text.label") // "text.label" betyder <text> med class "label"
      .data(data)
      .enter()
      .append("text")
      .text(function (d) {
        return `${parseInt(d.year)},${parseFloat(d.worst_case)}`;
      })
      .attr("x", function (d) {
        return xScale(parseInt(d.year));
      })
      .attr("y", function (d) {
        return yScale(parseFloat(d.best_case) - bottomPadding);
      })
      .attr("font-family", "sans-serif")
      .attr("font-size", "8px")
      .attr("class", "label"); // Husk at sætte class på


    // Lave x-akse med tal
    const xAxis = d3.axisBottom().scale(xScale);
    svg.append("g")
      .attr("transform", "translate(0," + (h - bottomPadding) + ")")
      .call(xAxis);


    // Lave y-akse med tal
    const yAxis = d3.axisLeft().scale(yScale).ticks(5);
    svg.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(" + (bottomPadding) + ",0)")
      .call(yAxis);
          });
    </script>
  </body>
</html>
